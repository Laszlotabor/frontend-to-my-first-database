<div class="container py-5" *ngIf="currentUser; else notLoggedIn">
    <div class="card shadow p-4 mb-4" style="max-width: 600px; margin: auto; border-radius: 1rem;">
      <h3 class="mb-3">Welcome, {{ currentUser.username }}!</h3>
      <p>Email: {{ currentUser.useremail }}</p>
  
      <hr />
  
      <h4>Add New Contact</h4>
      <form (ngSubmit)="addContact()" #contactForm="ngForm" class="mb-4">
        <div class="mb-3">
          <input
            type="text"
            name="name"
            [(ngModel)]="newContact.name"
            placeholder="Name"
            required
            class="form-control"
          />
        </div>
  
        <div class="mb-3">
          <input
            type="email"
            name="email"
            [(ngModel)]="newContact.email"
            placeholder="Email"
            required
            class="form-control"
          />
        </div>
  
        <div class="mb-3">
          <input
            type="text"
            name="phone"
            [(ngModel)]="newContact.phone"
            placeholder="Phone"
            required
            class="form-control"
          />
        </div>
  
        <button type="submit" class="btn btn-primary w-100" [disabled]="contactForm.invalid">
          Add Contact
        </button>
      </form>
  
      <hr />
  
      <h4>Your Contacts</h4>
      <div *ngIf="contacts.length === 0" class="text-muted">
        No contacts added yet.
      </div>
  
      <div class="row gy-3">
        <div class="col-12" *ngFor="let contact of contacts">
          <div class="card contact-card shadow-sm p-3 rounded">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5 class="mb-1">{{ contact.name }}</h5>
                <p class="mb-1"><strong>Phone:</strong> {{ contact.phone }}</p>
                <p class="mb-0"><strong>Email:</strong> {{ contact.email }}</p>
              </div>
              <div class="btn-group btn-group-sm">
                <button class="btn btn-outline-secondary" (click)="selectContactForEdit(contact)">
                  Edit
                </button>
                <button class="btn btn-outline-danger" (click)="deleteContact(contact.id)">
                  Delete
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
  
      <div *ngIf="editingContact" class="card mt-4 p-3 bg-light rounded shadow-sm">
        <h5>Edit Contact</h5>
        <form (ngSubmit)="updateContact()" #editForm="ngForm">
          <div class="mb-3">
            <input
              type="text"
              [(ngModel)]="editingContact.name"
              name="editName"
              required
              class="form-control"
            />
          </div>
  
          <div class="mb-3">
            <input
              type="email"
              [(ngModel)]="editingContact.email"
              name="editEmail"
              required
              class="form-control"
            />
          </div>
  
          <div class="mb-3">
            <input
              type="text"
              [(ngModel)]="editingContact.phone"
              name="editPhone"
              required
              class="form-control"
            />
          </div>
  
          <button type="submit" class="btn btn-success me-2">Save</button>
          <button type="button" class="btn btn-secondary" (click)="cancelEditing()">Cancel</button>
        </form>
      </div>
  
      <div class="text-center mt-4">
        <button class="btn btn-outline-danger" (click)="logout()">Logout</button>
      </div>
    </div>
  </div>
  
  <ng-template #notLoggedIn>
    <div class="text-center py-5">
      <h3>Please log in to see your contacts.</h3>
    </div>
  </ng-template>
  